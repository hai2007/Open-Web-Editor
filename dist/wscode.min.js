/*!
* web Studio Code - 🎉 An Editor Used on the Browser Side.
* git+https://github.com/yelloxing/Web-Studio-Code.git
*
* author 心叶
*
* version 2.1.0
*
* build Fri May 08 2020
*
* Copyright yelloxing
* Released under the MIT license
*
* Date:Mon Oct 12 2020 11:50:45 GMT+0800 (GMT+08:00)
*/

"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(!e)return;if(typeof e==="string")return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor)r=e.constructor.name;if(r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _arrayLikeToArray(e,t)}function _iterableToArray(e){if(typeof Symbol!=="undefined"&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){if(t==null||t>e.length)t=e.length;for(var r=0,n=new Array(t);r<t;r++){n[r]=e[r]}return n}function _defineProperty(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}function _typeof(e){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function e(t){return typeof t}}else{_typeof=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return _typeof(e)}(function(){"use strict";var e;var t=Object.prototype.toString;function r(e){if(e==null){return e===undefined?"[object Undefined]":"[object Null]"}return t.call(e)}function n(e){if(e===null||_typeof(e)!=="object"||r(e)!="[object Object]"){return false}if(Object.getPrototypeOf(e)===null){return true}var t=e;while(Object.getPrototypeOf(t)!==null){t=Object.getPrototypeOf(t)}return Object.getPrototypeOf(e)===t}function o(e){return e!==null&&_typeof(e)==="object"&&(e.nodeType===1||e.nodeType===9||e.nodeType===11)&&!n(e)}var f={stopPropagation:function e(t){t=t||window.event;if(t.stopPropagation){t.stopPropagation()}else{t.cancelBubble=true}},preventDefault:function e(t){t=t||window.event;if(t.preventDefault){t.preventDefault()}else{t.returnValue=false}},bind:function e(t,r,n){if(window.attachEvent){t.attachEvent("on"+r,n)}else{t.addEventListener(r,n,false)}},trigger:function e(t,r,n){var i;if(arguments.length>2){t.wscode_terminal=n}if(document.createEventObject){i=document.createEventObject();t.fireEvent("on"+r,i)}else{i=document.createEvent("HTMLEvents");i.initEvent(r,true,false);t.dispatchEvent(i)}},toNode:function e(t){var r=document.createElement("div");r.innerHTML=t;var n=r.childNodes;for(var i=0;i<n.length;i++){if(o(n[i]))return n[i]}return null},appendTo:function e(t,r){var n=o(r)?r:this.toNode(r);t.appendChild(n);return n},remove:function e(t){t.parentNode.removeChild(t)},after:function e(t,r){var n=o(r)?r:this.toNode(r);t.parentNode.insertBefore(n,t.nextSibling);return n},css:function e(t,r){for(var n in r){t.style[n]=r[n]}},attr:function e(t,r){for(var n in r){t.setAttribute(n,r[n])}},position:function e(t,r){r=r||window.event;var n=t.getBoundingClientRect();if(!r||!r.clientX)throw new Error("Event is necessary!");var i={x:r.clientX-n.left+t.scrollLeft,y:r.clientY-n.top+t.scrollTop};return i},copy:function e(t){var r=this.appendTo(document.body,"<textarea>"+t+"</textarea>");r.select();try{var n=window.document.execCommand("copy",false,null);if(n){}else{}}catch(e){console.error(e)}document.body.removeChild(r)}};function _(e){var t=_typeof(e);return t==="string"||t==="object"&&e!=null&&!Array.isArray(e)&&r(e)==="[object String]"}function i(e){var t=_typeof(e);return e!=null&&(t==="object"||t==="function")}function h(e){if(!i(e)){return false}var t=r(e);return t==="[object Function]"||t==="[object AsyncFunction]"||t==="[object GeneratorFunction]"||t==="[object Proxy]"}function s(e){this.__helpCalcDOM.innerText=e;return this.__helpCalcDOM.offsetWidth}function u(e,t){if(arguments.length<2)t=t||this.__lineNum;var r=this._contentArray[t];if(e<=40)return 0;if(e-40>=this.$$textWidth(r))return r.length;var n=e-40,i=1;for(;i<r.length;i++){var o=Math.abs(e-40-this.$$textWidth(r.substr(0,i)));if(o>n)break;n=o}return i-1}function l(e,t){return{x:this.$$textWidth(this._contentArray[t].substr(0,e)),y:t*21}}function a(){return this.__cursor1.lineNum!=this.__cursor2.lineNum||this.__cursor1.leftNum!=this.__cursor2.leftNum}function c(e,t,r){var n=this;var i="";i+="<div style='min-width: fit-content;white-space: nowrap;line-height:21px;height:21px;'>";var o=r?"font-size:0;":"";i+="<em style='"+o+"color:"+this._colorNumber+";user-select: none;display:inline-block;font-style:normal;width:35px;text-align:right;margin-right:5px;'>"+(t+1)+"</em>";e.forEach(function(e){var t=e.content;t=t.replace(/\&/g,"&amp;");t=t.replace(/</g,"&lt;");t=t.replace(/>/g,"&gt;");i+="<span style='user-select: none;font-weight:"+n._fontWeight+";white-space: pre;color:"+e.color+"'>"+t+"</span>"});return i+"</div>"}function p(e){return{leftNum:e.__leftNum,lineNum:e.__lineNum,x:e.__cursorLeft,y:e.__cursorTop,lineHeight:21}}function d(){var t=this;this._el.innerHTML="";f.css(this._el,{"font-size":"12px",position:"relative",cursor:"text","font-family":this._fontFamily,background:this._colorBackground,overflow:"auto"});f.bind(this._el,"click",function(){setTimeout(function(){t.__focusDOM.focus()})});this.__helpCalcDOM=f.appendTo(this._el,"<span></span>");f.css(this.__helpCalcDOM,{position:"absolute","z-index":"-1","white-space":"pre",top:0,left:0,color:"rgba(0,0,0,0)","font-weight":this._fontWeight});this.__helpInputDOM=f.appendTo(this._el,"<div></div>");f.css(this.__helpInputDOM,{position:"absolute","z-index":1});f.bind(this.__helpInputDOM,"click",function(e){f.stopPropagation(e);f.preventDefault(e);t.__focusDOM.focus()});this.__focusDOM=f.appendTo(this._el,"<textarea></textarea>");f.css(this.__focusDOM,{position:"absolute",width:"6px","margin-top":"3px",height:"15px","line-height":"15px",resize:"none",overflow:"hidden",padding:"0",outline:"none",border:"none",background:"rgba(0,0,0,0)",color:this._colorCursor});f.attr(this.__focusDOM,{wrap:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false"});if(this._readonly){f.attr(this.__focusDOM,{readonly:true})}this.__showDOM=f.appendTo(this._el,"<div></div>");f.css(this.__showDOM,{padding:"10px 0"});this.__selectCanvas=f.appendTo(this._el,"<canvas></canvas>");f.css(this.__selectCanvas,{position:"absolute",left:"40px",top:"10px",opacity:"0.5"});this.$$updateCanvasSize(1,1)}function m(){f.css(this.__focusDOM,{left:40+this.$$textWidth(this._contentArray[this.__lineNum])+"px",top:10+this.__lineNum*21+"px"})}function y(){var r=this;if(this.__diff&&this.__diff.beginNum+this.__diff.endNum>10){var e=this.__showDOM.childNodes;var t=e.length;for(var n=t-this.__diff.endNum-1;n>=this.__diff.beginNum;n--){f.remove(e[n])}if(this.__diff.beginNum>0){for(var i=this.__formatData.length-1-this.__diff.endNum;i>=this.__diff.beginNum;i--){f.after(e[this.__diff.beginNum-1],this.$$toTemplate(this.__formatData[i],i,this._noLineNumber))}}else{for(var o=0;o<this.__formatData.length-this.__diff.endNum;o++){f.appendTo(this.__showDOM,this.$$toTemplate(this.__formatData[o],o,this._noLineNumber))}}e=this.__showDOM.childNodes;for(var _=this.__diff.beginNum;_<this.__formatData.length;_++){e[_].getElementsByTagName("em")[0].innerText=_+1}}else if(this.__diff!="not update"){var s="";this.__formatData.forEach(function(e,t){s+=r.$$toTemplate(e,t,r._noLineNumber)});this.__showDOM.innerHTML=s}this.__diff="not update";var u=this.__showDOM.childNodes[this.__lineNum];if(!this._readonly&&this.__lineDom){this.__lineDom.style.backgroundColor="rgba(0, 0, 0, 0)";u.style.backgroundColor=this._colorEdit}this.__lineDom=u}function N(){var _=this;var s=this.__selectCanvas.getContext("2d");s.fillStyle=this._colorSelect;s.clearRect(0,0,this.__selectCanvas.scrollWidth,this.__selectCanvas.scrollHeight);var e=function e(t,r,n){var i=_.$$calcCanvasXY(t,n);var o=_.$$calcCanvasXY(r,n);if(t==r&&t==0){s.fillRect(i.x,i.y,5,21)}else{s.fillRect(i.x,i.y,o.x-i.x,21)}};if(this.__cursor1.lineNum==this.__cursor2.lineNum&&this.__cursor1.leftNum==this.__cursor2.leftNum)return;s.beginPath();if(this.__cursor1.lineNum==this.__cursor2.lineNum){e(this.__cursor1.leftNum,this.__cursor2.leftNum,this.__cursor1.lineNum)}else{var t,r;if(this.__cursor1.lineNum<this.__cursor2.lineNum){t=this.__cursor1;r=this.__cursor2}else{t=this.__cursor2;r=this.__cursor1}e(t.leftNum,this._contentArray[t.lineNum].length,t.lineNum);e(0,r.leftNum,r.lineNum);for(var n=t.lineNum+1;n<r.lineNum;n++){e(0,this._contentArray[n].length,n)}}}function $(){this.__cursorTop=this.__lineNum*21+10;this.__cursorLeft=40+this.$$textWidth(this._contentArray[this.__lineNum].substring(0,this.__leftNum));f.css(this.__focusDOM,{top:this.__cursorTop+"px",left:this.__cursorLeft+"px"})}function b(e,t){if(arguments.length<2){e=this._el.scrollWidth-40;t=this._el.scrollHeight-10}f.css(this.__selectCanvas,{width:e+"px",height:t+"px"});f.attr(this.__selectCanvas,{width:e,height:t})}function v(){this.$$updateCanvasSize(1,1);this.__cursor1={leftNum:0,lineNum:0};this.__cursor2={leftNum:0,lineNum:0}}function g(){var e=this.__cursor2,t=this.__cursor1;if(this.__cursor1.lineNum<this.__cursor2.lineNum){e=this.__cursor1;t=this.__cursor2}else if(this.__cursor1.lineNum==this.__cursor2.lineNum){if(this.__cursor1.leftNum<this.__cursor2.leftNum){e=this.__cursor1;t=this.__cursor2}}var r=this._contentArray[e.lineNum].substr(0,e.leftNum)+this._contentArray[t.lineNum].substr(t.leftNum);this._contentArray.splice(e.lineNum,t.lineNum-e.lineNum+1,r);this.__leftNum=this.__cursor1.leftNum=this.__cursor2.leftNum=e.leftNum;this.__lineNum=this.__cursor1.lineNum=this.__cursor2.lineNum=e.lineNum;this.$$cancelSelect()}var A=(e={48:[0,")"],49:[1,"!"],50:[2,"@"],51:[3,"#"],52:[4,"$"],53:[5,"%"],54:[6,"^"],55:[7,"&"],56:[8,"*"],57:[9,"("],96:[0,0],97:1,98:2,99:3,100:4,101:5,102:6,103:7,104:8,105:9,106:"*",107:"+",109:"-",110:".",111:"/",65:["a","A"],66:["b","B"],67:["c","C"],68:["d","D"],69:["e","E"],70:["f","F"],71:["g","G"],72:["h","H"],73:["i","I"],74:["j","J"],75:["k","K"],76:["l","L"],77:["m","M"],78:["n","N"],79:["o","O"],80:["p","P"],81:["q","Q"],82:["r","R"],83:["s","S"],84:["t","T"],85:["u","U"],86:["v","V"],87:["w","W"],88:["x","X"],89:["y","Y"],90:["z","Z"],37:"left",38:"up",39:"right",40:"down",33:"page up",34:"page down",35:"end",36:"home",16:"shift",17:"ctrl",18:"alt",91:"command",92:"command",93:"command",9:"tab",20:"caps lock",32:"spacebar",8:"backspace",13:"enter",27:"esc",46:"delete",45:"insert",144:"number lock",145:"scroll lock",12:"clear"},_defineProperty(e,"45","insert"),_defineProperty(e,19,"pause"),_defineProperty(e,112,"f1"),_defineProperty(e,113,"f2"),_defineProperty(e,114,"f3"),_defineProperty(e,115,"f4"),_defineProperty(e,116,"f5"),_defineProperty(e,117,"f6"),_defineProperty(e,118,"f7"),_defineProperty(e,119,"f8"),_defineProperty(e,120,"f9"),_defineProperty(e,121,"f10"),_defineProperty(e,122,"f11"),_defineProperty(e,123,"f12"),_defineProperty(e,189,["-","_"]),_defineProperty(e,187,["=","+"]),_defineProperty(e,219,["[","{"]),_defineProperty(e,221,["]","}"]),_defineProperty(e,220,["\\","|"]),_defineProperty(e,186,[";",":"]),_defineProperty(e,222,["'",'"']),_defineProperty(e,188,[",","<"]),_defineProperty(e,190,[".",">"]),_defineProperty(e,191,["/","?"]),_defineProperty(e,192,["`","~"]),e);var w=["shift","ctrl","alt"];function D(e){e=e||window.event;var t=e.keyCode||e.which;var r=A[t]||t;if(!r)return;if(r.constructor!==Array)r=[r,r];var n=e.shiftKey?"shift+":"",i=e.altKey?"alt+":"",o=e.ctrlKey?"ctrl+":"";var _="",s=o+n+i;if(w.indexOf(r[0])>=0){r[0]=r[1]=""}var u=e.code=="Key"+e.key&&!n;_=s+(s==""&&u?r[1]:r[0]);if(r[0]==""){_=_.replace(/\+$/,"")}return _}function x(){var l=this;var t=false;var r=function e(t){var r=f.position(l._el,t);var n=Math.round((r.y-20.5)/21);if(n<0)n=0;if(n>=l._contentArray.length)n=l._contentArray.length-1;return{leftNum:l.$$bestLeftNum(r.x,n),lineNum:n}};var a=function e(){var t=l.__cursor2,r=l.__cursor1;if(l.__cursor1.lineNum<l.__cursor2.lineNum){t=l.__cursor1;r=l.__cursor2}else if(l.__cursor1.lineNum==l.__cursor2.lineNum){if(l.__cursor1.leftNum<l.__cursor2.leftNum){t=l.__cursor1;r=l.__cursor2}return l._contentArray[t.lineNum].substring(t.leftNum,r.leftNum)}var n="";n+=l._contentArray[t.lineNum].substr(t.leftNum)+"\n";for(var i=t.lineNum+1;i<r.lineNum;i++){n+=l._contentArray[i]+"\n"}n+=l._contentArray[r.lineNum].substr(0,r.leftNum);return n};f.bind(this._el,"mousedown",function(e){t=true;l.__cursor2=l.__cursor1=r(e);l.$$updateCanvasSize();l.$$updateSelectView()});f.bind(this._el,"mousemove",function(e){if(!t)return;l.__cursor2=r(e);l.$$updateSelectView()});f.bind(this._el,"mouseup",function(){return t=false});f.bind(this._el,"mouseout",function(){return t=false});f.bind(this._el,"click",function(e){l.__helpInputDOM.innerHTML="";var t=f.position(l._el,e);var r=Math.round((t.y-20.5)/21);if(r<0||r>=l._contentArray.length)return;l.__lineNum=r;l.__leftNum=l.$$bestLeftNum(t.x);l.$$updateCursorPosition();l.$$updateView()});var c=function e(t){t=t||l.__focusDOM.value;t=l.$$filterText(t);l.__focusDOM.value="";if(l.$$selectIsNotBlank())l.$$deleteSelect();if(/^\n$/.test(t)){if(l.__leftNum>=l._contentArray[l.__lineNum].length){l._contentArray.splice(l.__lineNum+1,0,"")}else{l._contentArray.splice(l.__lineNum+1,0,l._contentArray[l.__lineNum].substring(l.__leftNum));l._contentArray[l.__lineNum]=l._contentArray[l.__lineNum].substring(0,l.__leftNum)}l.__lineNum+=1;l.__leftNum=0}else{var r=t.split(/\n/);if(r.length<=1){l._contentArray[l.__lineNum]=l._contentArray[l.__lineNum].substring(0,l.__leftNum)+t+l._contentArray[l.__lineNum].substring(l.__leftNum);l.__leftNum+=t.length}else{var n;var i=l._contentArray[l.__lineNum].substring(0,l.__leftNum);var o=l._contentArray[l.__lineNum].substring(l.__leftNum);r[0]=i+r[0];r[r.length-1]+=o;(n=l._contentArray).splice.apply(n,[l.__lineNum,1].concat(_toConsumableArray(r)));l.__lineNum+=r.length-1;l.__leftNum=r[r.length-1].length-o.length}}l.__formatData=l.$$diff(l.$shader(l._contentArray.join("\n")));l.$$updateCursorPosition();l.$$updateView();l.__updated__()};f.bind(this.__focusDOM,"compositionstart",function(){l.__needUpdate=false;l.__focusDOM.style.color="rgba(0,0,0,0)";l.__focusDOM.style.borderLeft="1px solid "+l._colorCursor});f.bind(this.__focusDOM,"compositionend",function(){l.__needUpdate=true;l.__focusDOM.style.color=l._colorCursor;l.__focusDOM.style.borderLeft="none";c();if(l.$input!=null)l.__helpInputEvent=l.$input(l.__helpInputDOM,p(l),l._contentArray)||{}});f.bind(this.__focusDOM,"input",function(){if(l.__needUpdate){c();if(l.$input!=null)l.__helpInputEvent=l.$input(l.__helpInputDOM,p(l),l._contentArray)||{}}});f.bind(this._el,"keydown",function(e){var t=l._el.wscode_terminal;var r=t=="none"?D(e):t;l._el.wscode_terminal="none";if(l.__helpInputDOM.innerHTML!=""){var n=l.__helpInputEvent[r];if(h(n)){if(!n())return}else{l.__helpInputDOM.innerHTML=""}}if(t=="none"&&l._readonly&&["ctrl+a","ctrl+c"].indexOf(r)<0)return;switch(r){case"ctrl+a":{l.__cursor1={leftNum:0,lineNum:0};l.__cursor2={lineNum:l._contentArray.length-1,leftNum:l._contentArray[l._contentArray.length-1].length};l.$$updateSelectView();break}case"ctrl+c":{if(l.$$selectIsNotBlank()){f.copy(a());l.__focusDOM.focus()}break}case"ctrl+x":{if(l.$$selectIsNotBlank()){f.copy(a());l.__focusDOM.focus();l.$$deleteSelect();l.__formatData=l.$$diff(l.$shader(l._contentArray.join("\n")));l.$$updateCursorPosition();l.$$updateView();l.$$cancelSelect();l.__updated__()}break}case"tab":{f.stopPropagation(e);f.preventDefault(e);var i="";for(var o=0;o<l._tabSpace;o++){i+=" "}if(l.$$selectIsNotBlank()){var _=l.__cursor1.lineNum,s=l.__cursor2.lineNum;if(_>s){_=l.__cursor2.lineNum;s=l.__cursor1.lineNum}for(var u=_;u<=s;u++){l._contentArray[u]=i+l._contentArray[u]}l.__cursor1.leftNum+=l._tabSpace;l.__cursor2.leftNum+=l._tabSpace;l.__leftNum+=l._tabSpace;l.__formatData=l.$$diff(l.$shader(l._contentArray.join("\n")));l.$$updateCursorPosition();l.$$updateView();l.$$updateCanvasSize();l.$$updateSelectView();l.__updated__()}else{c(i)}break}case"up":{if(l.__lineNum<=0)return;l.__lineNum-=1;l.__leftNum=l.$$bestLeftNum(l.$$textWidth(l._contentArray[l.__lineNum+1].substr(0,l.__leftNum))+40);l.$$updateCursorPosition();l.$$updateView();l.$$cancelSelect();l._el.scrollTop-=21;break}case"down":{if(l.__lineNum>=l._contentArray.length-1)return;l.__lineNum+=1;l.__leftNum=l.$$bestLeftNum(l.$$textWidth(l._contentArray[l.__lineNum-1].substr(0,l.__leftNum))+40);l.$$updateCursorPosition();l.$$updateView();l.$$cancelSelect();l._el.scrollTop+=21;break}case"left":{if(l.__leftNum<=0){if(l.__lineNum<=0)return;l.__lineNum-=1;l.__leftNum=l._contentArray[l.__lineNum].length}else{l.__leftNum-=1}l.$$updateCursorPosition();l.$$cancelSelect();break}case"right":{if(l.__leftNum>=l._contentArray[l.__lineNum].length){if(l.__lineNum>=l._contentArray.length-1)return;l.__lineNum+=1;l.__leftNum=0}else{l.__leftNum+=1}l.$$updateCursorPosition();l.$$cancelSelect();break}case"backspace":{if(l.$$selectIsNotBlank()){l.$$deleteSelect()}else{if(l.__leftNum<=0){if(l.__lineNum<=0)return;l.__lineNum-=1;l.__leftNum=l._contentArray[l.__lineNum].length;l._contentArray[l.__lineNum]+=l._contentArray[l.__lineNum+1];l._contentArray.splice(l.__lineNum+1,1)}else{l.__leftNum-=1;l._contentArray[l.__lineNum]=l._contentArray[l.__lineNum].substring(0,l.__leftNum)+l._contentArray[l.__lineNum].substring(l.__leftNum+1)}}l.__formatData=l.$$diff(l.$shader(l._contentArray.join("\n")));l.$$updateCursorPosition();l.$$updateView();l.$$cancelSelect();l.__updated__();break}}})}var O=function e(t,r){if(t.length!=r.length)return false;for(var n=0;n<t.length;n++){if(t[n].content!=r[n].content||t[n].color!=r[n].color)return false}return true};function M(e){var t=this.__formatData;if(t){var r=0;for(var n=0;n<t.length&&n<e.length;n++){if(!O(t[n],e[n])){break}r+=1}var i=0;for(var o=1;o<=t.length&&o<=e.length;o++){if(!O(t[t.length-o],e[e.length-o])){break}i+=1}var _=Math.min(t.length,e.length);if(r+i>=_){i=_-r-1;if(i<0)i=0}this.__diff={beginNum:r,endNum:i}}return e}function S(e){var t="";for(var r=0;r<this._tabSpace;r++){t+=" "}return e.replace(/\t/g,t)}var k=function e(t){var n=this;if(!(this instanceof e)){throw new Error("WSCode is a constructor and should be called with the `new` keyword")}if(o(t.el)){var r=function e(){var t=[];n._contentArray.forEach(function(e){t.push([{content:e,color:n._colorText}])});return t};var i=function e(t){return t};this._el=t.el;this._el.wscode_terminal="none";t.color=t.color||{};this._colorBackground=t.color.background||"#d6d6e4";this._colorText=t.color.text||"#000000";this._colorNumber=t.color.number||"#888484";this._colorEdit=t.color.edit||"#eaeaf1";this._colorCursor=t.color.cursor||"#ff0000";this._colorSelect=t.color.select||"#6c6cf1";this._fontFamily=t["font-family"]||"新宋体";this._fontWeight=t["font-weight"]||600;this._tabSpace=t.tabSpace||4;this._readonly=t.readonly||false;this._noLineNumber=t.noLineNumber||false;this._contentArray=_(t.content)?(this.$$filterText(t.content)+"").split("\n"):[""];this.$shader=h(t.shader)?t.shader:r;this.$format=h(t.format)?t.format:i;this.$input=h(t.input)?t.input:null}else{throw new Error("options.el is not a element!")}this.$$initDom();this.__needUpdate=true;this.__lineNum=this._contentArray.length-1;this.__leftNum=this._contentArray[this.__lineNum].length;this.__cursor1=this.__cursor2={leftNum:0,lineNum:0};this.__formatData=this.$$diff(this.$shader(this._contentArray.join("\n")));this.$$initView();this.$$updateView();this.$$bindEvent();this.__updated__=function(){};this.updated=function(e){n.__updated__=e};this.valueOf=function(){return n._contentArray.join("\n")};this.input=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;if(t!=0){if(r!=0){n._contentArray[n.__lineNum]=n._contentArray[n.__lineNum].substring(0,n.__leftNum+t)+n._contentArray[n.__lineNum].substring(n.__leftNum+t+r)}n.__leftNum+=t}n.__focusDOM.value=e;f.trigger(n.__focusDOM,"input");n.__focusDOM.focus()};this.format=function(){n._contentArray=n.$format(n._contentArray.join("\n"),n._tabSpace).split("\n");n.__lineNum=n._contentArray.length-1;n.__leftNum=n._contentArray[n.__lineNum].length;n.__formatData=n.$$diff(n.$shader(n._contentArray.join("\n")));n.$$updateView();n.$$initView()};this.terminal=function(e){switch(e){case"ctrl+a":{f.trigger(n._el,"keydown","ctrl+a");break}case"delete":{f.trigger(n._el,"keydown","backspace");break}default:{console.error("Undefined command!")}}return n}};k.prototype.$$textWidth=s;k.prototype.$$bestLeftNum=u;k.prototype.$$calcCanvasXY=l;k.prototype.$$selectIsNotBlank=a;k.prototype.$$filterText=S;k.prototype.$$toTemplate=c;k.prototype.$$initDom=d;k.prototype.$$initView=m;k.prototype.$$updateView=y;k.prototype.$$updateSelectView=N;k.prototype.$$updateCursorPosition=$;k.prototype.$$updateCanvasSize=b;k.prototype.$$cancelSelect=v;k.prototype.$$deleteSelect=g;k.prototype.$$bindEvent=x;k.prototype.$$diff=M;k.author="心叶（yelloxing@gmail.com）";if((typeof module==="undefined"?"undefined":_typeof(module))==="object"&&_typeof(module.exports)==="object"){module.exports=k}else{window.WSCode=k}})();