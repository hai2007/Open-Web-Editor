/*!
* web Studio Code - üéâ An Editor Used on the Browser Side.
* git+https://github.com/yelloxing/Web-Studio-Code.git
*
* author ÂøÉÂè∂
*
* version 1.2.1
*
* build Fri May 08 2020
*
* Copyright yelloxing
* Released under the MIT license
*
* Date:Tue May 12 2020 09:14:12 GMT+0800 (GMT+08:00)
*/

"use strict";function _defineProperty(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}function _typeof(e){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function e(t){return typeof t}}else{_typeof=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return _typeof(e)}(function(){"use strict";var e;var t=Object.prototype.toString;function n(e){if(e==null){return e===undefined?"[object Undefined]":"[object Null]"}return t.call(e)}function r(e){if(e===null||_typeof(e)!=="object"||n(e)!="[object Object]"){return false}if(Object.getPrototypeOf(e)===null){return true}var t=e;while(Object.getPrototypeOf(t)!==null){t=Object.getPrototypeOf(t)}return Object.getPrototypeOf(e)===t}function i(e){return e!==null&&_typeof(e)==="object"&&(e.nodeType===1||e.nodeType===9||e.nodeType===11)&&!r(e)}function o(e){var t=_typeof(e);return t==="string"||t==="object"&&e!=null&&!Array.isArray(e)&&n(e)==="[object String]"}function _(e){var t=_typeof(e);return e!=null&&(t==="object"||t==="function")}function l(e){if(!_(e)){return false}var t=n(e);return t==="[object Function]"||t==="[object AsyncFunction]"||t==="[object GeneratorFunction]"||t==="[object Proxy]"}function c(e){this.__helpDOM.innerText=e;return this.__helpDOM.offsetWidth}var u={stopPropagation:function e(t){t=t||window.event;if(t.stopPropagation){t.stopPropagation()}else{t.cancelBubble=true}},preventDefault:function e(t){t=t||window.event;if(t.preventDefault){t.preventDefault()}else{t.returnValue=false}},bind:function e(t,n,r){if(window.attachEvent){t.attachEvent("on"+n,r)}else{t.addEventListener(n,r,false)}},trigger:function e(t,n){var r;if(document.createEventObject){r=document.createEventObject();t.fireEvent("on"+n,r)}else{r=document.createEvent("HTMLEvents");r.initEvent(n,true,false);t.dispatchEvent(r)}},toNode:function e(t){var n=document.createElement("div");n.innerHTML=t;var r=n.childNodes;for(var o=0;o<r.length;o++){if(i(r[o]))return r[o]}return null},appendTo:function e(t,n){var r=i(n)?n:this.toNode(n);t.appendChild(r);return r},css:function e(t,n){for(var r in n){t.style[r]=n[r]}},attr:function e(t,n){for(var r in n){t.setAttribute(r,n[r])}},position:function e(t,n){n=n||window.event;var r=t.getBoundingClientRect();if(!n||!n.clientX)throw new Error("Event is necessary!");return{x:n.clientX-r.left,y:n.clientY-r.top}}};function f(){var e=this;u.css(this._el,{"font-size":"12px",position:"relative",cursor:"text","font-family":"Êñ∞ÂÆã‰Ωì",background:this._colorBackground,overflow:"auto"});u.bind(this._el,"click",function(){e.__focusDOM.focus()});this.__helpDOM=u.appendTo(this._el,"<span></span>");u.css(this.__helpDOM,{position:"absolute","z-index":"-1","white-space":"pre",top:0,left:0,"font-weight":600});this.__focusDOM=u.appendTo(this._el,"<textarea></textarea>");u.css(this.__focusDOM,{position:"absolute",width:"6px",height:"21px","line-height":"21px",resize:"none",overflow:"hidden",padding:"0",outline:"none",border:"none",background:"#0000",color:this._colorText});u.attr(this.__focusDOM,{wrap:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false"});this.__showDOM=u.appendTo(this._el,"<div></div>");u.css(this.__showDOM,{padding:"10px 0"})}function a(){u.css(this.__focusDOM,{left:40+this.$$textWidth(this._contentArray[this.__lineNum])+"px",top:10+this.__lineNum*21+"px"});this.__focusDOM.focus()}function s(){var r=this;var o="";this.__formatData.forEach(function(e,t){var n="";if(t==r.__lineNum){n="background-color:"+r._colorEdit}o+="<div style='min-width: fit-content;white-space: nowrap;line-height:21px;height:21px;"+n+"'>";o+="<em style='color:"+r._colorNumber+";user-select: none;display:inline-block;font-style:normal;width:35px;text-align:right;margin-right:5px;'>"+(t+1)+"</em>";e.forEach(function(e){o+="<span style='font-weight:600;white-space: pre;color:"+e.color+"'>"+e.content+"</span>"});o+="</div>"});this.__showDOM.innerHTML=o}function p(e){if(/^\n$/.test(e)){var t=+this.__focusDOM.style.top.replace("px","");u.css(this.__focusDOM,{top:t+21+"px",left:"40px"})}else{var n=+this.__focusDOM.style.left.replace("px","");var r=this.$$textWidth(e);u.css(this.__focusDOM,{left:n+r+"px"})}}var d=(e={48:[0,")"],49:[1,"!"],50:[2,"@"],51:[3,"#"],52:[4,"$"],53:[5,"%"],54:[6,"^"],55:[7,"&"],56:[8,"*"],57:[9,"("],96:[0,0],97:1,98:2,99:3,100:4,101:5,102:6,103:7,104:8,105:9,106:"*",107:"+",109:"-",110:".",111:"/",65:["a","A"],66:["b","B"],67:["c","C"],68:["d","D"],69:["e","E"],70:["f","F"],71:["g","G"],72:["h","H"],73:["i","I"],74:["j","J"],75:["k","K"],76:["l","L"],77:["m","M"],78:["n","N"],79:["o","O"],80:["p","P"],81:["q","Q"],82:["r","R"],83:["s","S"],84:["t","T"],85:["u","U"],86:["v","V"],87:["w","W"],88:["x","X"],89:["y","Y"],90:["z","Z"],37:"left",38:"up",39:"right",40:"down",33:"page up",34:"page down",35:"end",36:"home",16:"shift",17:"ctrl",18:"alt",91:"command",92:"command",93:"command",9:"tab",20:"caps lock",32:"spacebar",8:"backspace",13:"enter",27:"esc",46:"delete",45:"insert",144:"number lock",145:"scroll lock",12:"clear"},_defineProperty(e,"45","insert"),_defineProperty(e,19,"pause"),_defineProperty(e,112,"f1"),_defineProperty(e,113,"f2"),_defineProperty(e,114,"f3"),_defineProperty(e,115,"f4"),_defineProperty(e,116,"f5"),_defineProperty(e,117,"f6"),_defineProperty(e,118,"f7"),_defineProperty(e,119,"f8"),_defineProperty(e,120,"f9"),_defineProperty(e,121,"f10"),_defineProperty(e,122,"f11"),_defineProperty(e,123,"f12"),_defineProperty(e,189,["-","_"]),_defineProperty(e,187,["=","+"]),_defineProperty(e,219,["[","{"]),_defineProperty(e,221,["]","}"]),_defineProperty(e,220,["\\","|"]),_defineProperty(e,186,[";",":"]),_defineProperty(e,222,["'",'"']),_defineProperty(e,188,[",","<"]),_defineProperty(e,190,[".",">"]),_defineProperty(e,191,["/","?"]),_defineProperty(e,192,["`","~"]),e);var h=["shift","ctrl","alt"];function y(e){e=e||window.event;var t=e.keyCode||e.which;var n=d[t]||t;if(!n)return;if(n.constructor!==Array)n=[n,n];var r=e.shiftKey?"shift+":"",o=e.altKey?"alt+":"",i=e.ctrlKey?"ctrl+":"";var _="",l=i+r+o;if(h.indexOf(n[0])>=0){n[0]=n[1]=""}var c=e.code=="Key"+e.key&&!r;_=l+(l==""&&c?n[1]:n[0]);if(n[0]==""){_=_.replace(/\+$/,"")}return _}function m(){var o=this;u.bind(this._el,"click",function(e){var t=u.position(o._el,e);var n=Math.round((t.y-20.5)/21);if(n<0||n>=o._contentArray.length)return;o.__lineNum=n;o.__leftNum=o._contentArray[o.__lineNum].length;u.css(o.__focusDOM,{left:40+o.$$textWidth(o._contentArray[o.__lineNum])+"px",top:10+o.__lineNum*21+"px"});o.$$updateView()});var i=function e(t){t=t||o.__focusDOM.value;o.__focusDOM.value="";o.$$updateCursorPosition(t);if(/^\n$/.test(t)){if(o.__leftNum>=o._contentArray[o.__lineNum].length){o._contentArray.splice(o.__lineNum+1,0,"")}else{o._contentArray.splice(o.__lineNum+1,0,o._contentArray[o.__lineNum].substring(o.__leftNum));o._contentArray[o.__lineNum]=o._contentArray[o.__lineNum].substring(0,o.__leftNum)}o.__lineNum+=1;o.__leftNum=0}else{o._contentArray[o.__lineNum]=o._contentArray[o.__lineNum].substring(0,o.__leftNum)+t+o._contentArray[o.__lineNum].substring(o.__leftNum);o.__leftNum+=t.length}o.__formatData=o.$shader(o._contentArray.join("\n"));o.$$updateView()};u.bind(this.__focusDOM,"compositionstart",function(){o.__needUpdate=false});u.bind(this.__focusDOM,"compositionend",function(){o.__needUpdate=true;i()});u.bind(this.__focusDOM,"input",function(){if(o.__needUpdate)i()});u.bind(this._el,"keydown",function(e){switch(y(e)){case"tab":{u.stopPropagation(e);u.preventDefault(e);i("    ");break}case"up":{if(o.__lineNum<=0)return;o.__lineNum-=1;o.__leftNum=o._contentArray[o.__lineNum].length;u.css(o.__focusDOM,{left:40+o.$$textWidth(o._contentArray[o.__lineNum])+"px",top:10+o.__lineNum*21+"px"});o.$$updateView();o._el.scrollTop-=21;break}case"down":{if(o.__lineNum>=o._contentArray.length-1)return;o.__lineNum+=1;o.__leftNum=o._contentArray[o.__lineNum].length;u.css(o.__focusDOM,{left:40+o.$$textWidth(o._contentArray[o.__lineNum])+"px",top:10+o.__lineNum*21+"px"});o.$$updateView();o._el.scrollTop+=21;break}case"left":{if(o.__leftNum<=0)return;o.__leftNum-=1;var t=o.__focusDOM.style.left.replace("px","")-o.$$textWidth(o._contentArray[o.__lineNum][o.__leftNum]);o.__focusDOM.style.left=t+"px";break}case"right":{if(o.__leftNum>=o._contentArray[o.__lineNum].length)return;o.__leftNum+=1;var n=o.__focusDOM.style.left.replace("px","")- -o.$$textWidth(o._contentArray[o.__lineNum][o.__leftNum-1]);o.__focusDOM.style.left=n+"px";break}case"backspace":{if(o.__leftNum<=0){if(o.__lineNum<=0)return;o._contentArray.splice(o.__lineNum,1);o.__lineNum-=1;o.__leftNum=o._contentArray[o.__lineNum].length;u.css(o.__focusDOM,{left:40+o.$$textWidth(o._contentArray[o.__lineNum])+"px",top:10+o.__lineNum*21+"px"})}else{o.__leftNum-=1;var r=o.__focusDOM.style.left.replace("px","")-o.$$textWidth(o._contentArray[o.__lineNum][o.__leftNum]);o.__focusDOM.style.left=r+"px";o._contentArray[o.__lineNum]=o._contentArray[o.__lineNum].substring(0,o.__leftNum)+o._contentArray[o.__lineNum].substring(o.__leftNum+1)}o.__formatData=o.$shader(o._contentArray.join("\n"));o.$$updateView();break}}})}var b=function e(t){var n=this;if(i(t.el)){this._el=t.el;t.color=t.color||{};this._colorBackground=t.color.background||"#d6d6e4";this._colorText=t.color.text||"#000";this._colorNumber=t.color.number||"#888484";this._colorEdit=t.color.edit||"#eaeaf1";this._contentArray=o(t.content)?(t.content+"").split("\n"):[""];this.$shader=l(t.shader)?t.shader:function(){var t=[];n._contentArray.forEach(function(e){t.push([{content:e,color:n._colorText}])});return t};this.$format=l(t.format)?t.format:function(e){return e}}else{throw new Error("options.el is not a element!")}this.$$initDom();this.__needUpdate=true;this.__lineNum=this._contentArray.length-1;this.__leftNum=this._contentArray[this.__lineNum].length;this.__formatData=this.$shader(this._contentArray.join("\n"));this.$$initView();this.$$updateView();this.$$bindEvent();this.valueOf=function(){return n._contentArray.join("\n")};this.format=function(){n._contentArray=n.$format(n._contentArray.join("\n")).split("\n");n.__lineNum=n._contentArray.length-1;n.__leftNum=n._contentArray[n.__lineNum].length;n.__formatData=n.$shader(n._contentArray.join("\n"));n.$$updateView();n.$$initView()}};b.prototype.$$textWidth=c;b.prototype.$$initDom=f;b.prototype.$$initView=a;b.prototype.$$updateView=s;b.prototype.$$updateCursorPosition=p;b.prototype.$$bindEvent=m;if((typeof module==="undefined"?"undefined":_typeof(module))==="object"&&_typeof(module.exports)==="object"){module.exports=b}else{window.WSCode=b}})();