/*!
* web Studio Code - üéâ An Editor Used on the Browser Side.
* git+https://github.com/yelloxing/Web-Studio-Code.git
*
* author ÂøÉÂè∂
*
* version 1.2.0
*
* build Fri May 08 2020
*
* Copyright yelloxing
* Released under the MIT license
*
* Date:Mon May 11 2020 22:40:50 GMT+0800 (GMT+08:00)
*/

"use strict";function _defineProperty(t,e,n){if(e in t){Object.defineProperty(t,e,{value:n,enumerable:true,configurable:true,writable:true})}else{t[e]=n}return t}function _typeof(t){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function t(e){return typeof e}}else{_typeof=function t(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return _typeof(t)}(function(){"use strict";var t;var e=Object.prototype.toString;function n(t){if(t==null){return t===undefined?"[object Undefined]":"[object Null]"}return e.call(t)}function o(t){if(t===null||_typeof(t)!=="object"||n(t)!="[object Object]"){return false}if(Object.getPrototypeOf(t)===null){return true}var e=t;while(Object.getPrototypeOf(e)!==null){e=Object.getPrototypeOf(e)}return Object.getPrototypeOf(t)===e}function i(t){return t!==null&&_typeof(t)==="object"&&(t.nodeType===1||t.nodeType===9||t.nodeType===11)&&!o(t)}function r(t){var e=_typeof(t);return e==="string"||e==="object"&&t!=null&&!Array.isArray(t)&&n(t)==="[object String]"}function c(t){var e=_typeof(t);return t!=null&&(e==="object"||e==="function")}function f(t){if(!c(t)){return false}var e=n(t);return e==="[object Function]"||e==="[object AsyncFunction]"||e==="[object GeneratorFunction]"||e==="[object Proxy]"}function s(t){this.__helpDOM.innerText=t;return this.__helpDOM.offsetWidth}var a={stopPropagation:function t(e){e=e||window.event;if(e.stopPropagation){e.stopPropagation()}else{e.cancelBubble=true}},preventDefault:function t(e){e=e||window.event;if(e.preventDefault){e.preventDefault()}else{e.returnValue=false}},bind:function t(e,n,o){if(window.attachEvent){e.attachEvent("on"+n,o)}else{e.addEventListener(n,o,false)}},trigger:function t(e,n){var o;if(document.createEventObject){o=document.createEventObject();e.fireEvent("on"+n,o)}else{o=document.createEvent("HTMLEvents");o.initEvent(n,true,false);e.dispatchEvent(o)}},toNode:function t(e){var n=document.createElement("div");n.innerHTML=e;var o=n.childNodes;for(var r=0;r<o.length;r++){if(i(o[r]))return o[r]}return null},appendTo:function t(e,n){var o=i(n)?n:this.toNode(n);e.appendChild(o);return o},css:function t(e,n){for(var o in n){e.style[o]=n[o]}},attr:function t(e,n){for(var o in n){e.setAttribute(o,n[o])}}};function l(){var t=this;a.css(this._el,{"font-size":"12px",position:"relative",cursor:"text","font-family":"Êñ∞ÂÆã‰Ωì",background:this._colorBackground,overflow:"auto"});a.bind(this._el,"click",function(){t.__focusDOM.focus()});this.__helpDOM=a.appendTo(this._el,"<span></span>");a.css(this.__helpDOM,{position:"absolute","z-index":"-1","white-space":"pre",top:0,left:0,"font-weight":600});this.__focusDOM=a.appendTo(this._el,"<textarea></textarea>");a.css(this.__focusDOM,{position:"absolute",width:"20px",height:"21px","line-height":"21px",resize:"none",overflow:"hidden",padding:"0",outline:"none",border:"none",background:"#0000",color:this._colorText});a.attr(this.__focusDOM,{wrap:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false"});this.__showDOM=a.appendTo(this._el,"<div></div>");a.css(this.__showDOM,{padding:"10px 0"})}function u(){a.css(this.__focusDOM,{left:40+this.$$textWidth(this._contentArray[this.__lineNum])+"px",top:10+this.__lineNum*21+"px"});this.__focusDOM.focus()}function _(){var o=this;var r="";this.__formatData.forEach(function(t,e){var n="";if(e==o.__lineNum){n="background-color:"+o._colorEdit}r+="<div style='min-width: fit-content;white-space: nowrap;line-height:21px;height:21px;"+n+"'>";r+="<em style='color:"+o._colorNumber+";user-select: none;display:inline-block;font-style:normal;width:35px;text-align:right;margin-right:5px;'>"+(e+1)+"</em>";t.forEach(function(t){r+="<span style='padding-right:10px;font-weight:600;white-space: pre;color:"+t.color+"'>"+t.content+"</span>"});r+="</div>"});this.__showDOM.innerHTML=r}function p(t){if(/^\n$/.test(t)){var e=+this.__focusDOM.style.top.replace("px","");a.css(this.__focusDOM,{top:e+21+"px",left:"40px"})}else{var n=+this.__focusDOM.style.left.replace("px","");var o=this.$$textWidth(t);a.css(this.__focusDOM,{left:n+o+"px"})}}var d=(t={48:[0,")"],49:[1,"!"],50:[2,"@"],51:[3,"#"],52:[4,"$"],53:[5,"%"],54:[6,"^"],55:[7,"&"],56:[8,"*"],57:[9,"("],96:[0,0],97:1,98:2,99:3,100:4,101:5,102:6,103:7,104:8,105:9,106:"*",107:"+",109:"-",110:".",111:"/",65:["a","A"],66:["b","B"],67:["c","C"],68:["d","D"],69:["e","E"],70:["f","F"],71:["g","G"],72:["h","H"],73:["i","I"],74:["j","J"],75:["k","K"],76:["l","L"],77:["m","M"],78:["n","N"],79:["o","O"],80:["p","P"],81:["q","Q"],82:["r","R"],83:["s","S"],84:["t","T"],85:["u","U"],86:["v","V"],87:["w","W"],88:["x","X"],89:["y","Y"],90:["z","Z"],37:"left",38:"up",39:"right",40:"down",33:"page up",34:"page down",35:"end",36:"home",16:"shift",17:"ctrl",18:"alt",91:"command",92:"command",93:"command",9:"tab",20:"caps lock",32:"spacebar",8:"backspace",13:"enter",27:"esc",46:"delete",45:"insert",144:"number lock",145:"scroll lock",12:"clear"},_defineProperty(t,"45","insert"),_defineProperty(t,19,"pause"),_defineProperty(t,112,"f1"),_defineProperty(t,113,"f2"),_defineProperty(t,114,"f3"),_defineProperty(t,115,"f4"),_defineProperty(t,116,"f5"),_defineProperty(t,117,"f6"),_defineProperty(t,118,"f7"),_defineProperty(t,119,"f8"),_defineProperty(t,120,"f9"),_defineProperty(t,121,"f10"),_defineProperty(t,122,"f11"),_defineProperty(t,123,"f12"),_defineProperty(t,189,["-","_"]),_defineProperty(t,187,["=","+"]),_defineProperty(t,219,["[","{"]),_defineProperty(t,221,["]","}"]),_defineProperty(t,220,["\\","|"]),_defineProperty(t,186,[";",":"]),_defineProperty(t,222,["'",'"']),_defineProperty(t,188,[",","<"]),_defineProperty(t,190,[".",">"]),_defineProperty(t,191,["/","?"]),_defineProperty(t,192,["`","~"]),t);var h=["shift","ctrl","alt"];function y(t){t=t||window.event;var e=t.keyCode||t.which;var n=d[e]||e;if(!n)return;if(n.constructor!==Array)n=[n,n];var o=t.shiftKey?"shift+":"",r=t.altKey?"alt+":"",i=t.ctrlKey?"ctrl+":"";var c="",f=i+o+r;if(h.indexOf(n[0])>=0){n[0]=n[1]=""}var s=t.code=="Key"+t.key&&!o;c=f+(f==""&&s?n[1]:n[0]);if(n[0]==""){c=c.replace(/\+$/,"")}return c}function m(){var n=this;a.bind(this._el,"click",function(t){});var t=function t(e){e=e||n.__focusDOM.value;n.__focusDOM.value="";n.$$updateCursorPosition(e);if(/^\n$/.test(e)){if(n.__leftNum>=n._contentArray[n.__lineNum].length){n._contentArray.splice(n.__lineNum+1,0,"")}else{n._contentArray.splice(n.__lineNum+1,0,n._contentArray[n.__lineNum].substring(n.__leftNum));n._contentArray[n.__lineNum]=n._contentArray[n.__lineNum].substring(0,n.__leftNum)}n.__lineNum+=1;n.__leftNum=0}else{n._contentArray[n.__lineNum]=n._contentArray[n.__lineNum].substring(0,n.__leftNum)+e+n._contentArray[n.__lineNum].substring(n.__leftNum);n.__leftNum+=e.length}n.__formatData=n.$shader(n._contentArray.join("\n"));n.$$updateView()};a.bind(this.__focusDOM,"compositionstart",function(){n.__needUpdate=false});a.bind(this.__focusDOM,"compositionend",function(){n.__needUpdate=true;t()});a.bind(this.__focusDOM,"input",function(){if(n.__needUpdate)t()});a.bind(this._el,"keydown",function(t){switch(y(t)){}})}var b=function t(e){var n=this;if(i(e.el)){this._el=e.el;e.color=e.color||{};this._colorBackground=e.color.background||"#d6d6e4";this._colorText=e.color.text||"#000";this._colorNumber=e.color.number||"#888484";this._colorEdit=e.color.edit||"#eaeaf1";this._contentArray=r(e.content)?(e.content+"").split("\n"):[""];this.$shader=f(e.shader)?e.shader:function(){var e=[];n._contentArray.forEach(function(t){e.push([{content:t,color:n._colorText}])});return e};this.$format=f(e.format)?e.format:function(t){return t}}else{throw new Error("options.el is not a element!")}this.$$initDom();this.__needUpdate=true;this.__lineNum=this._contentArray.length-1;this.__leftNum=this._contentArray[this.__lineNum].length;this.__formatData=this.$shader(this._contentArray.join("\n"));this.$$initView();this.$$updateView();this.$$bindEvent();this.valueOf=function(){return n._contentArray.join("\n")};this.format=function(){n._contentArray=n.$format(n._contentArray.join("\n")).split("\n");n.__lineNum=n._contentArray.length-1;n.__leftNum=n._contentArray[n.__lineNum].length;n.__formatData=n.$shader(n._contentArray.join("\n"));n.$$updateView();n.$$initView()}};b.prototype.$$textWidth=s;b.prototype.$$initDom=l;b.prototype.$$initView=u;b.prototype.$$updateView=_;b.prototype.$$updateCursorPosition=p;b.prototype.$$bindEvent=m;if((typeof module==="undefined"?"undefined":_typeof(module))==="object"&&_typeof(module.exports)==="object"){module.exports=b}else{window.WSCode=b}})();